<span class="text-primary">Selecione o período:</span>
<div class="row mb-4">
    <div class="col">
        <div class="form-floating">
            <select name="month" id="monthSummary" class="form-control w-75" (change)="checkMonthCbo($event)">
                <option value="selecione o mês">Selecione o mês</option>
                @for(item of monthsList; track $index) {
                    <option value="{{ item }}">{{ item }}</option>
                }
            </select>
            <label for="monthSummary">Mês</label>
        </div>
        @if(isMonthNotSelected) {
            <p class="text-danger mb-2">Campo obrigatório</p>
        }
    </div>
    <div class="col">
        <div class="form-floating">
            <select name="year" id="yearSummary" class="form-control w-75" (change)="checkYearCbo($event)">
                <option value="selecione o ano">Selecione o ano</option>
                    @for(item of yearsList; track $index) {
                        <option value="{{ item }}">{{ item }}</option>
                    }
            </select>
            <label for="yearSummary">Ano</label>
        </div>
        @if(isYearNotSelected) {
            <p class="text-danger mb-2">Campo obrigatório</p>
        }
    </div>
</div>

<h3 class="text-primary">Resumo de Despesas</h3>

@if(isDataFound) {
    <div class="card bg-card">
        <div class="card-body">
            <div class="row">
                <div class="col col-6">
                    <div class="card">
                        <div class="card-body">
                            @if (isLoadingRevenue) {
                                <div class="d-flex justify-content-center">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="sr-only"></span>
                                    </div>
                                </div>
                            } @else if (isRevenueLoaded) {
                                <div>
                                    <span class="fw-bold" style="color: green;">|</span>
                                    <span class="fw-bold" style="color: gray;"> Receitas</span>
                                    <p class="fw-bold ms-2">{{ revenue }}</p>
                                    <hr>
                                    <p style="font-size: small;">Receita referente à {{ month }} de {{ year }}</p>
                                </div>
                            }
                        </div>
                    </div>
                </div>
                <div class="col col-6">
                    <div class="card">
                        <div class="card-body">
                            @if(isLoadingExpenses) {
                                <div class="d-flex justify-content-center">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="sr-only"></span>
                                    </div>
                                </div>
                            } @else if(isExpensesLoaded) {
                                <div>
                                    <span class="fw-bold text-danger">|</span>
                                    <span class="fw-bold" style="color: gray;"> Despesas</span>
                                    <p class="fw-bold ms-2">{{ expenses }}</p>
                                    <hr>
                                    <p style="font-size: small;">Despesa referente à {{ expensesMonth }} de {{ expensesYear }}</p>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div class="row my-4">
                <div class="col">
                    @if(isLoadingBudgetsUsageData) {
                        <div class="d-flex justify-content-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="sr-only"></span>
                            </div>
                        </div>
                    } @else if(isBudgetUsageDataLoaded) {
                        @for(budgetUsage of budgetsUsageDataList; track $index){
                            <div class="card mb-4">
                                <div class="card-body">
                                    <p class="fw-bold" style="color: gray;">
                                        <i class="{{ budgetUsage.icon }}"></i>
                                        Orçamento: {{ budgetUsage.description }}
                                    </p>
                                    <i class="bi bi-arrow-right ms-2" style="color: blue;"></i>
                                    <span class="fw-bold"> Total Orçado: {{ budgetUsage.totalSet }}</span>
                                    <br>
                                    <i class="bi bi-arrow-right ms-2" style="color: blueviolet;"></i>
                                    <span class="fw-bold"> Total Consumido: {{ budgetUsage.totalUsed }}</span>
                                    <br>
                                    <i class="bi bi-arrow-right ms-2" style="color: green;"></i>
                                    <span class="fw-bold"> Total Disponível: {{ budgetUsage.totalAvailable }}</span>
                                    

                                    @for(categories of budgetUsage.categories; track $index) {
                                        @if($index==0) {
                                            <p class="fw-bold my-2" style="color: gray;">Despesas por Categoria</p>
                                        }
                                        <div class="row ms-2">
                                            <div class="col col-md-2">
                                                <span class="fw-bold">{{ categories.category }}</span>
                                            </div>
                                            <div class="col">
                                                <svg height="50" width="300" xmlns="http://www.w3.org/2000/svg">
                                                    @if(categories.percentage<="1.00" && categories.percentage>="0.96") {
                                                        <line x1="0" y1="10" x2="280" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.95" && categories.percentage>="0.91") {
                                                        <line x1="0" y1="10" x2="266" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.90" && categories.percentage>="0.86") {
                                                        <line x1="0" y1="10" x2="252" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.85" && categories.percentage>="0.81") {
                                                        <line x1="0" y1="10" x2="238" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.80" && categories.percentage>="0.76") {
                                                        <line x1="0" y1="10" x2="224" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.75" && categories.percentage>="0.71") {
                                                        <line x1="0" y1="10" x2="210" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.70" && categories.percentage>="0.66") {
                                                        <line x1="0" y1="10" x2="196" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.65" && categories.percentage>="0.61") {
                                                        <line x1="0" y1="10" x2="182" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.60" && categories.percentage>="0.56") {
                                                        <line x1="0" y1="10" x2="168" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.55" && categories.percentage>="0.51") {
                                                        <line x1="0" y1="10" x2="154" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.50" && categories.percentage>="0.46") {
                                                        <line x1="0" y1="10" x2="140" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.45" && categories.percentage>="0.41") {
                                                        <line x1="0" y1="10" x2="126" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.40" && categories.percentage>="0.36") {
                                                        <line x1="0" y1="10" x2="112" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.35" && categories.percentage>="0.31") {
                                                        <line x1="0" y1="10" x2="98" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.30" && categories.percentage>="0.26") {
                                                        <line x1="0" y1="10" x2="84" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.25" && categories.percentage>="0.21") {
                                                        <line x1="0" y1="10" x2="70" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.20" && categories.percentage>="0.16") {
                                                        <line x1="0" y1="10" x2="56" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.15" && categories.percentage>="0.11") {
                                                        <line x1="0" y1="10" x2="42" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage=="0.10") {
                                                        <line x1="0" y1="10" x2="28" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }

                                                    @if(categories.percentage<="0.09" && categories.percentage>="0.01") {
                                                        <line x1="0" y1="10" x2="26" y2="10" stroke-linecap="round" [ngStyle]="categories.style"></line>
                                                    }
                                                    
                                                    Sorry, your browser does not support inline SVG. 
                                                </svg>
                                            </div>
                                        </div>
                                    }

                                    @if(budgetUsage.categories.length>0) {
                                        <hr>
                                    }
                                    
                                    <div class="row">
                                        @for(categoriesValue of budgetUsage.categories; track $index) {
                                            <div class="col">
                                                <svg height="10" width="10" xmlns="http://www.w3.org/2000/svg">
                                                    @if(categoriesValue.category=="Moradia") {
                                                        <circle r="5" cx="5" cy="5" fill="red"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Alimentação") {
                                                        <circle r="5" cx="5" cy="5" fill="blue"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Saúde") {
                                                        <circle r="5" cx="5" cy="5" fill="purple"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Educação") {
                                                        <circle r="5" cx="5" cy="5" fill="gray"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Transporte") {
                                                        <circle r="5" cx="5" cy="5" fill="gold"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Lazer") {
                                                        <circle r="5" cx="5" cy="5" fill="brown"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Pessoal") {
                                                        <circle r="5" cx="5" cy="5" fill="orange"></circle>
                                                    }

                                                    @if(categoriesValue.category=="Financeiro") {
                                                        <circle r="5" cx="5" cy="5" fill="black"></circle>
                                                    }
                                                    
                                                    Sorry, your browser does not support inline SVG. 
                                                </svg>
                                                <span class="fw-bold"> {{ categoriesValue.value }}</span>
                                            </div>
                                        }
                                        
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    
                </div>
            </div>
        </div>
    </div>
} 

@if(isLoadingData) {
    <div class="d-flex justify-content-center">
        <div class="spinner-border text-primary" role="status">
            <span class="sr-only"></span>
        </div>
    </div>
} 

<div id="summaryDataNotFound"></div>
